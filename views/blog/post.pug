extends ../layouts/layout

block content
  h2 #{post.title}
  p.post-meta By #{post.author} (Posted on #{post.created_at.toLocaleString()})
  p.post-content= post.content
  br

  // Debug: Show the logged-in user's details
  if user
    p DEBUG: Logged in as #{user.username}
  else
    p DEBUG: No user session found

  // Only show edit and delete buttons if the user is the post author
  if user && user.username === post.author
    a(href=`/edit/${post.id}`) Edit Post
    form(method="POST", action=`/delete/${post.id}`, style="display: inline;")
      input(type="hidden", name="_csrf", value=csrfToken)
      button(type="submit", class="danger") Delete Post
